<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Your Wordle Game</title>
    <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
        rel="stylesheet" 
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
        crossorigin="anonymous">
    <link 
        rel="stylesheet" 
        type="text/css" 
        href="{{ url_for('static', filename='css/create_game.css') }}">
    <link 
        rel="stylesheet" 
        href="../static/puzzle_list/footer_styles.css"/>
</head>
<body>  
    {% include "navbar.html" %}
    <header>
      <h1>Create Your Wordle Game</h1>
    </header>
    <div class="content">
        <form action="{{ url_for('create-game.protect') }}" method="POST" onsubmit="return checkInput()">
            <div class="mb-3">
                <label for="form_game_name">
                    Please give a unique name for your wordle game:
                <input 
                    type="text" 
                    name="form_game_name" 
                    placeholder="Please use no more than 15 characters" 
                    required>
                </label>
                <div id="gameNameError" style="display: none";> 
                </div>
            </div>
           <br><br>

           <div class="mb-3">
                <label for="form_wordle_solution">
                    Please type in the correct Wordle solution:
                <input 
                    type="text" 
                    name="form_wordle_solution" 
                    placeholder="Please use only letters" 
                    required>
                </label><br><br>
                <div id="solutionError" style="display: none";> 
                </div>
           </div>
           
           <div class="mb-3">
                <label for="form_number_of_attempts">
                    How many attempts are allowed for your Wordle game:
                <input 
                    type="number" 
                    name="form_number_of_attempts" 
                    placeholder="Please use a number larger than 0" 
                    required>
                </label><br><br>
                <div id="attemptsError"style="display: none";>
                </div>
           </div>
            
            <button 
                type="submit">
                Submit and Create
            </button>
        </form>
    </div>
    {% include "footer.html" %}
    <script>
        function checkInput() {
            const puzzleSolution = document.forms["gameForm"]["form_wordle_solution"].value;
            const solutionPattern = /^[a-zA-Z]+$/;
            const number_of_attempts = document.forms["gameForm"]["form_number_of_attempts"].value

            document.getElementById("nameError").innerText = "";
            document.getElementById("solutionError").innerText = "";
            document.getElementById("attemptsError").innerText = "";

            if (!solutionPattern.test(puzzleSolution)) {
                document.getElementById("solutionError").style.display = "Puzzle solution uses only letters";
                return false;
            }
            if (puzzleSolution.length > 15) {
                document.getElementById("solutionError").style.display = "Puzzle solution no longer than 15 letters.";
                return false;
            }
            if (puzzleName.length > 15) {
                document.getElementById("nameError").style.display = "Puzzle name no longer than 15 letters";
                return false;
            }
            if (isNaN(numberOfAttempts) || numberOfAttempts <= 0) {
                document.getElementById("attemptsError").style.display = "Number of attempts must be greater than 0.";
                return false;
            }
            return true;
        }
    </script>
</body>
</html>
